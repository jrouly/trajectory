{% extends 'layout/base.html' %}

{% block title %}{{ department.university.abbreviation }} {{ department.abbrevation }}{% endblock %}

{% block content %}

<div class="page-header">
  <div class="row">
    <div class="col-lg-12">
      <h1>{{ department.university.abbreviation }}/{{ department.abbreviation }}
        {% if department.url %}
        - <a target="_blank" href="//{{department.url}}">web</a>
        {% endif %}</h1>
    </div>
  </div>
</div>

<div class="row">
  <div class="col-lg-12">

    <h3>Course List</h3>

    <table class="table table-hover" id="accordion">
      <thead>
        <tr>
          <th>#</th>
          <th>Number</th>
          <th>Title</th>
        </tr>
      </thead>
      <tbody>
        {% for course in department.courses %}
        <tr data-toggle="collapse" data-target=".collapse{{course.id}}"
          class="clickable" id="{{course.id}}">
          <td>{{loop.index}}</td>
          <td>{{ course.number }}</td>
          <td>{{ course.title }}</td>
        </tr>

        <tr class="info collapse collapse{{course.id}}">
          <td colspan="3">
            <div class="collapse collapse{{course.id}}">
              {{ course.description_raw }}
            </div>
          </td>
        </tr>

        {% for topic in course.topics %}
        <tr class="success collapse collapse{{course.id}}">
          <td colspan="3">
            <div class="collapse collapse{{course.id}}">
              {{ topic.proportion }} : {{ topic.topic.words }}
            </div>
          </td>
        </tr>
        {% else %}
        <tr class="collapse danger collapse{{course.id}}">
          <td colspan="3">
            <div class="collapse collapse{{course.id}}">
              No topics inferred.
            </div>
          </td>
        </tr>
        {% endfor %}

        {% else %}
        <tr>
          <td></td>
          <td>No courses found.</td>
          <td></td>
          <td></td>
        </tr>
        {% endfor %}
      </tbody>

    </table>

  </div>
</div>

{% endblock %}
